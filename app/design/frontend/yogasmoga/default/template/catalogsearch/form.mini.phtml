<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
/* @var $this Mage_Core_Block_Template */
/* @var $catalogSearchHelper Mage_Catalogsearch_Helper_Data */
$catalogSearchHelper =  $this->helper('catalogsearch');
?>

<?php /*
<form id="search_mini_form" action="<?php echo $catalogSearchHelper->getResultUrl() ?>" method="get" style="display: none;">
    <div class="form-search">
        <label for="search"><?php echo $this->__('Search:') ?></label>
        <input id="search" type="text" name="<?php echo $catalogSearchHelper->getQueryParamName() ?>" value="<?php echo $catalogSearchHelper->getEscapedQueryText() ?>" class="input-text" maxlength="<?php echo $catalogSearchHelper->getMaxQueryLength();?>" />
        <button type="submit" title="<?php echo $this->__('Search') ?>" class="button"><span><span><?php echo $this->__('Search') ?></span></span></button>
        <div id="search_autocomplete" class="search-autocomplete"></div>
        <script type="text/javascript">
        //<![CDATA[
            var searchForm = new Varien.searchForm('search_mini_form', 'search', '<?php echo $this->__('Search entire store here...') ?>');
            searchForm.initAutocomplete('<?php echo $catalogSearchHelper->getSuggestUrl() ?>', 'search_autocomplete');
        //]]>
        </script>
    </div>
</form>
*/ ?>

<script type="text/javascript">
var issearchanimating = false;
jQuery(document).ready(function($){
    var srch_speed=500;
    var srch_btn=true;
	$("#search_btn").click(function () {
		if(issearchanimating)
			return;
      if ($("#search_form").is(":hidden")) {
		//$("#search_form input[type=submit]").css("display", "none");
        $("#search_form").show().slideDown(srch_speed);
        issearchanimating = true;
		$("#search_form").animate({"top": "80px"}, srch_speed, function() {
			$("#search_text").focus();
			issearchanimating = false;
			});
      } else {
		//$("#search_form").fadeOut("fast");
		//$("#search_form").css({top: ""});
		//$("#search_form").slideUp(srch_speed);
		issearchanimating = true;
		$("#search_form").hide().animate({"top": "65px"}, 0, function() {
			issearchanimating = false;
		});
		//$("#search_form").animate({"bottom": "+=50px"}, srch_speed);
		//$("#search_form").animate({"right": "-=30px"}, "medium");
		srch_btn=true;
		btn=true;
      }
	});
	
	$('#search_text').keyup(function() {
	  if((($('#search_text').val().length>0)) && ($("#search_form input[type=submit]").is(":hidden")) )
	  {
		//$("#search_text").animate({"right": "+=100px"}, "medium");
		$("#search_form input[type=submit]").fadeIn();
		//$("#search_form").animate({"right": "+=64px"}, srch_speed);	
		//srch_btn=false;
	  }
	  if(($('#search_text').val().length==0) && (!$("#search_form input[type=submit]").is(":hidden")) )
	  {
		  //$("#search_form").animate({"right": "-=64px"}, srch_speed);
		  $("#search_form input[type=submit]").fadeOut();
	  }
	});
});

function close_search_box()
{
	if (!jQuery("#search_form").is(":hidden")) 
	{
    	issearchanimating = true;
    	jQuery("#search_form").hide().animate({"top": "65px"}, 0, function() {
    		issearchanimating = false;
    	});
    	//$("#search_form").animate({"bottom": "+=50px"}, srch_speed);
    	//$("#search_form").animate({"right": "-=30px"}, "medium");
    	srch_btn=true;
    	btn=true;
	}
}
</script>
<div id="search_btn"></div>
<div style="clear : both;"></div>
<div id="search_form" class="colorbg">
	<form id="search_frm"  action="<?php echo $catalogSearchHelper->getResultUrl() ?>" method="get" autocomplete="off" >
		<input id="search_text" type="text" name="<?php echo $catalogSearchHelper->getQueryParamName() ?>" value="<?php echo $catalogSearchHelper->getEscapedQueryText() ?>" watermark="Search"  maxlength="<?php echo $catalogSearchHelper->getMaxQueryLength();?>"/>
		<input type="submit" value="Search" style="display:none;"  />
	</form>
</div>